<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- SEO Meta Tags -->
    <meta name="description" content="Welcome to the portfolio of Heshan Sathyanga, a passionate Full-stack Software Engineer from Sri Lanka, specializing in building seamless digital experiences.">
    <meta name="keywords" content="Heshan Sathyanga, Full-stack Developer, Software Engineer, Portfolio, Web Developer, Sri Lanka, JavaScript, React, Node.js">
    <meta name="author" content="Heshan Sathyanga">

    <!-- Open Graph Meta Tags (for social sharing) -->
    <meta property="og:title" content="Heshan Sathyanga - Full-stack Software Engineer">
    <meta property="og:description" content="Passionate about building seamless digital experiences that blend creativity and technology for real-world impact.">
    <meta property="og:image" content="https://i.imgur.com/your-image.jpg"> <!-- TODO: Replace with a link to an actual preview image -->
    <meta property="og:url" content="https://your-domain.com"> <!-- TODO: Replace with your actual domain -->
    <meta property="og:type" content="website">

    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Heshan Sathyanga - Full-stack Software Engineer">
    <meta name="twitter:description" content="Passionate about building seamless digital experiences that blend creativity and technology for real-world impact.">
    <meta name="twitter:image" content="https://i.imgur.com/your-image.jpg"> <!-- TODO: Replace with a link to an actual preview image -->
    <title>Heshan - Full-stack Software Engineer</title>
    <link rel="icon" href="favicon/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="about.css">
    <link rel="stylesheet" href="education.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body class="loading">
    <!-- Page Loader -->
    <div class="page-loader" role="status" aria-live="polite">
        <div class="loader-3d" aria-hidden="true">
            <span></span>
            <span></span>
            <span></span>
        </div>
    </div>
    <button class="mobile-nav-toggle" aria-controls="sidebar-container" aria-expanded="false">
        <i class="fas fa-bars"></i>
    </button>
    <div class="interactive-bg"></div>
    <!-- Fullscreen Spline Background Layer -->
    <div class="spline-bg">
        <canvas id="spline-canvas" class="spline-bg-canvas" data-scene="https://prod.spline.design/kVbVqf7W0CJv79a1/scene.splinecode" data-head-name="Head"></canvas>
    </div>

    <!-- Floating Contact Pill (above Spline badge) -->
    <div class="contact-pill">
        <a href="#contact" class="pill-link" aria-label="Hire Me">
            <span class="pill-icon"><i class="fas fa-briefcase"></i></span>
            <span class="pill-text">Hire Me</span>
        </a>
    </div>

    <div id="sidebar-container"></div>

    <main class="main-content">
        <header class="hero" id="hero">
            <div class="hero-text">
                <p class="availability"><span class="dot"></span> Available for Work</p>
                <h1>Hi, I'm <span class="highlight">Heshan</span></h1>
                <h2>Full-stack Software Engineer</h2>
                <p class="description">
                    Passionate about building seamless digital experiences that blend
                    creativity and technology for real-world impact.
                </p>
                <div class="cta-buttons">
                    <a href="cv/IMG_20250806_113227_017.pdf" download="Heshan_Sathyanga_CV.pdf" class="btn btn-primary"><i class="fas fa-download"></i> Download CV</a>
                    <a href="#contact" class="btn btn-secondary"><i class="fas fa-envelope"></i> Contact Me</a>
                </div>
                <div class="social-links">
                    <a href="#"><i class="fab fa-linkedin-in"></i></a>
                    <a href="#"><i class="fab fa-instagram"></i></a>
                    <a href="https://wa.me/qr/3AUEBJZJHKIJA1"><i class="fab fa-whatsapp"></i></a>
                    <a href="#"><i class="fab fa-facebook-f"></i></a>
                </div>
            </div>
            <div class="hero-animation">
                <div class="animated-circle">
                    <div class="inner-text"><div class="propic"> </div></div>
                </div>
            </div>
        </header>


        
        <!-- About Section Container -->
        <div id="about-container"></div>

        <!-- Education Section Container -->
        <div id="education-container"></div>
        <div id="experience-container"></div>
        <div id="skills-container"></div>
        <div id="services-container"></div>
        <div id="projects-container"></div>

        <!-- Contact Section -->
        <div id="contact-container"></div>

        <!-- Location Section -->
        <div id="location-container"></div>

    </main>
    
    <!-- Project Quick View Modal -->
    <div id="project-modal" class="modal-container">
        <div class="modal-content">
            <button class="modal-close">&times;</button>
            <div class="modal-body"></div>
        </div>
    </div>

    <!-- Certificate Quick View Modal -->
    <div id="certificate-modal" class="modal-container">
        <div class="modal-content">
            <button class="modal-close">&times;</button>
            <div class="modal-body"></div>
        </div>
    </div>

    <!-- Scroll-to-Top Button -->
    <a href="#" class="scroll-to-top">
        <i class="fas fa-arrow-up"></i>
    </a>

    <script src="data.js"></script>
    <script src="script.js"></script>
    <script type="module">
      import { Application } from 'https://unpkg.com/@splinetool/runtime/build/runtime.js';
      const canvas = document.getElementById('spline-canvas');
      if (canvas) {
        const sceneUrl = canvas.dataset.scene || '';
        if (!sceneUrl) {
          console.warn('Spline scene URL not set. Set data-scene on #spline-canvas.');
        } else {
          const app = new Application(canvas);
          try {
            await app.load(sceneUrl);
            const preferredName = canvas.dataset.headName || 'Head';
            const candidateNames = [preferredName, 'Head', 'Head_Bone', 'Head.001', 'Neck', 'Top part', 'Top', 'Bot'];
            let head = null;
            for (const n of candidateNames) {
              head = app.findObjectByName(n);
              if (head) { console.info('Using Spline object for tracking:', n, head); break; }
            }
            if (!head) {
              console.warn('Spline head object not found. Set data-head-name on #spline-canvas to match your object name (e.g., "Head" or "Top part").');
            } else {
              const maxX = Math.PI / 8;  // up/down
              const maxY = Math.PI / 6;  // left/right
              let targetX = 0, targetY = 0;
              const lerp = (a,b,t)=>a+(b-a)*t;
              // Pointer/Touch tracking (works for mouse and mobile)
              const root = document.documentElement;
              const updateFromPoint = (x, y) => {
                const nx = (x / window.innerWidth) * 2 - 1;
                const ny = (y / window.innerHeight) * 2 - 1;
                targetY = nx * maxY;
                targetX = ny * maxX; // invert so moving down looks down
                // Update cursor-follow halo position
                root.style.setProperty('--x', x + 'px');
                root.style.setProperty('--y', y + 'px');
              };
              // Initialize halo to center on load
              updateFromPoint(window.innerWidth/2, window.innerHeight/2);
              window.addEventListener('pointermove', (e) => {
                updateFromPoint(e.clientX, e.clientY);
              }, { passive: true });
              window.addEventListener('touchmove', (e) => {
                const t = e.touches && e.touches[0];
                if (!t) return;
                updateFromPoint(t.clientX, t.clientY);
              }, { passive: true });
              // Debug: press "D" to toggle auto-rotate test
              let debugSpin = false; let t = 0;
              window.addEventListener('keydown', (e)=>{ if (e.key.toLowerCase()==='d'){ debugSpin = !debugSpin; console.log('Spline debug spin:', debugSpin); } });
              function animate() {
                if (debugSpin) {
                  t += 0.02; // slow spin to verify rotations apply
                  targetY = Math.sin(t) * (maxY * 0.7);
                  targetX = Math.cos(t * 0.8) * (maxX * 0.5);
                }
                head.rotation.x = lerp(head.rotation.x, targetX, 0.16);
                head.rotation.y = lerp(head.rotation.y, targetY, 0.16);
                requestAnimationFrame(animate);
              }
              animate();
              // Reveal site after Spline is ready
              document.body.classList.remove('loading');
            }
          } catch (err) {
            console.error('Failed to load Spline scene:', err);
            // Fail-safe: still show the site if Spline fails
            document.body.classList.remove('loading');
          }
          // Fallback: ensure loader never gets stuck beyond 6s
          setTimeout(()=>document.body.classList.remove('loading'), 6000);
        }
      }
    </script>
</body>
</html>
